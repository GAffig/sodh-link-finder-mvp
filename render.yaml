services:
  - type: web
    name: population-health-evidence-portal
    runtime: node
    buildCommand: npm install --no-audit --no-fund
    startCommand: npm start
    autoDeploy: true
    healthCheckPath: /
    envVars:
      - key: NODE_VERSION
        value: 20
      - key: BRAVE_API_KEY
        sync: false
      - key: SERPAPI_KEY
        sync: false
      - key: BING_API_KEY
        sync: false
      - key: SEARCH_COST_MODE
        value: economy
      - key: SEARCH_MAX_PROVIDER_CALLS
        value: 4
      - key: SEARCH_CACHE_TTL_MS
        value: 21600000
      - key: SEARCH_CACHE_MAX_ENTRIES
        value: 200
